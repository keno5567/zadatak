<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="log.css">
  <title>login</title>
</head>
<body>
  <div id="loginFormWrap">
    <h2>Login</h2>
    <form id="login-form">
      <p>
        <input type="email" id="userEmail" name="Email" placeholder="Email Address" required><i class="validation"><span></span><span></span></i>
      </p>
      <p>
        <input type="password" id="userPassword" name="password" placeholder="Password" required><i class="validation"><span></span><span></span></i>
      </p>
      <p>
      <input type="submit" id="loginBtn" value="Login" name="login">
      </p>
    </form>
    <div id="register">
      <p>Not a member? <a href="register.html">Register Now</a><p>
    </div>
  </div>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged 
    } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-auth.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
    apiKey: "AIzaSyACmLQXtDIWGGg9AWyThjDfL5CfByinaws",
    authDomain: "skljs-95d37.firebaseapp.com",
    projectId: "skljs-95d37",
    storageBucket: "skljs-95d37.appspot.com",
    messagingSenderId: "1018390858487",
    appId: "1:1018390858487:web:1ae5c9bc3a537e4a1761f2",
    measurementId: "G-JZRT9MMWM3"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // const userEmail = document.querySelector("#userEmail");
    // const userPassword = document.querySelector("#userPassword");

    // const userLogIn = async() => {
    //   const logInEmail = userEmail.value;
    //   const logInPassword = userPassword.value;
    //   createUserWithEmailAndPassword(auth, logInEmail, logInPassword)
    //   .then((userCredential) => {
    //     const user = userCredential.user;
    //     alert("your account has been created");
    //   })
    //   .catch((error) => {
    //     const errorCode = error.code;
    //     const errorMessage = error.message;
    //     console.log(errorCode + errorMessage)

    //   signInWithEmailAndPassword(auth, logInEmail, logInPassword)
    //   .then((userCredential) => {
    //     const user = userCredential.user;
    //     alert("your account has been created!!");
    //   })
    //   .catch((error) => {
    //     const errorCode = error.code;
    //     const errorMessage = error.message;
    //     console.log(errorCode + errorMessage)
    //   })
        
    //   })
    // }

    // const userSignIn = async() => {
    //   const email = email.value;
    //   const password = password.value;
    //   signInWithEmailAndPassword(auth, email, password)
    //   .then((userCredential) => {
    //     const user = userCredential.user;
    //     alert("your account has been created!!");
    //   })
    //   .catch((error) => {
    //     const errorCode = error.code;
    //     const errorMessage = error.message;
    //     console.log(errorCode + errorMessage)
    //   })
    // }

  // loginBtn.addEventListener('click', userLogIn); 
  // loginBtn.addEventListener('click', userSignIn); 

  loginBtn.addEventListener('click',(e) => {

  var email = document.getElementById('userEmail').value;
  var password = document.getElementById('userPassword').value;

  createUserWithEmailAndPassword(auth, email, password)
    .then((userCredential) => {
      location.href = 'home.html';
      const user = userCredential.user;
      // ... user.uid
    })
    .catch((error) => {
      const errorCode = error.code;
      const errorMessage = error.message;
      // ..
      alert(errorMessage);

  signInWithEmailAndPassword(auth, email, password)
    .then((userCredential) => {
      location.href = 'home.html';
      const user = userCredential.user;
      // ...
    })
    .catch((error) => {
      const errorCode = error.code;
      const errorMessage = error.message;
    });
  });
});
</script>

</body>
</html>